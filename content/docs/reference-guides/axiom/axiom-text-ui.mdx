---
title: Axiom Text-UI
description: Spry Axiom Explorer CLI
icon: Terminal
---

import { Callout } from 'fumadocs-ui/components/callout';
import { Card, Cards } from 'fumadocs-ui/components/card';
import { Tabs, Tab } from 'fumadocs-ui/components/tabs';
import { Steps, Step } from 'fumadocs-ui/components/steps';

## Spry Axiom Explorer — Text-UI CLI Overview

The Spry Axiom Explorer CLI is a lightweight, terminal-based interface built on top of the Spry framework to help developers and users interact with markdown docs, ontology graphs, and structured content directly from the command line. The CLI aims to streamline every-day workflows — browsing documentation, inspecting content structure, projecting subsets, or converting markdown into executable scripts — so you can work without leaving your terminal.

Spry is a lightweight TypeScript library that treats Markdown as a programmable medium, where every fence, section, and directive in your .md file can express behavior, not just formatting. The Runbook CLI (accessible via `spry.ts` or `runbook.ts`) is a Spry operator that allows you to execute code cells from markdown documents as tasks in a dependency graph (DAG).

**spry.ts** or **runbook.ts**:

```typescript
import { CLI } from "../../../lib/axiom/text-ui/runbook.ts";

new CLI().run();
```

<Callout type="info">
**What Spry Does:** It executes embedded code blocks, captures their outputs, composes multiple source types (SQL, HTML, JSON, shell, etc.) as executable "cells", and treats sections as first-class programmable units with attributes, metadata, and dependency graphs.
</Callout>

## Installation and Initialization

Install Deno 2.5 or higher and bootstrap your project:

```bash
cd <your-project>
deno run --node-modules-dir=auto -A https://raw.githubusercontent.com/programmablemd/spry/main/lib/sqlpage/cli.ts init
./spry.ts help
```

This creates:

- `spry.ts` - Executable wrapper to run Spry commands locally
- `Spryfile.md` - Executable Markdown defining tasks, SQL, and routes

<Tabs items={['Runbook', 'CLI']}>
  <Tab value="Runbook">
    ## Axiom Runbook Quick Reference
    
    ### Use Runbook CLI

    After the Installation and Initialization, to use the runbook cli, spry.ts content should be changed like:
    
    ```typescript
    #!/usr/bin/env -S deno run -A --node-modules-dir=auto
    // Use `deno run -A --watch` in the shebang if you're contributing / developing Spry itself.

    import { CLI } from "../../../lib/axiom/text-ui/runbook.ts";

    new CLI().run();
    ```

    ### Root Command

    ```bash
    ./spry.ts [command] [options]
    # or
    ./runbook.ts [command] [options]
    ```

    spry.ts or runbook.ts is simply the main entry point executable TypeScript file that provides the CLI interface.

    ### Commands

    #### 1. `help`

    Display help information about available commands.

    ```bash
    ./spry.ts help
    ```

    **Purpose:** Shows usage information and available commands.

    #### 2. `completions` - Generate Shell Completions

    Generate shell completions for bash, fish, or zsh.

    ```bash
    ./spry.ts completions [shell]
    ```

    **Purpose:** Generates auto-completion scripts for your shell environment to enable tab completion for Spry commands.

    **Supported Shells:**

    - `bash` - Generate completions for Bash
    - `fish` - Generate completions for Fish
    - `zsh` - Generate completions for Zsh

    **Options:**

    - `-h, --help`: Show help information
    - `-n, --name <command-name>`: The name of the main command

    <Tabs items={['Bash', 'Fish', 'Zsh']}>
      <Tab value="Bash">
        Generate shell completions for bash.

        ```bash
        ./spry.ts completions bash [options]
        ```

        **Setup:** Add the following line to your `~/.bashrc`:

        ```bash
        source <(./spry.ts completions bash)
        ```

        **Options:**
        - `-n, --name <command-name>`: The name of the main command

        **Example:**

        ```bash
        # Generate bash completions
        ./spry.ts completions bash

        # Generate with custom command name
        ./spry.ts completions bash --name myspry
        ```
      </Tab>
      
      <Tab value="Fish">
        Generate shell completions for fish.

        ```bash
        ./spry.ts completions fish [options]
        ```

        **Options:**
        - `-n, --name <command-name>`: The name of the main command

        **Example:**

        ```bash
        # Generate fish completions
        ./spry.ts completions fish
        ```
      </Tab>
      
      <Tab value="Zsh">
        Generate shell completions for zsh.

        ```bash
        ./spry.ts completions zsh [options]
        ```

        **Options:**
        - `-n, --name <command-name>`: The name of the main command (Default: "spry.ts")

        **Example:**

        ```bash
        # Generate zsh completions
        ./spry.ts completions zsh

        # Generate with custom command name
        ./spry.ts completions zsh --name myspry
        ```
      </Tab>
    </Tabs>

    #### 3. `axiom` - Spry Graph Viewer CLI

    An internal module designed to support a text-UI (command-line or simplified UI) for certain operational tasks, documentation or workflows.

    <Cards>
      <Card title="help [command]">
        Show this help or the help of a sub-command
        
        ```bash
        ./spry.ts axiom --help
        ./spry.ts axiom completions --help
        ```
      </Card>
      
      <Card title="completions">
        Generate shell completions
        
        ```bash
        # bash, fish, or zsh
        ./spry.ts axiom completions bash
        ```
      </Card>
      
      <Card title="web-ui [paths...]">
        Serve the markdown mdasts and Spry Ontology Graphs (SOGs)
        
        ```bash
        ./spry.ts axiom web-ui
        ./spry.ts axiom web-ui <path to md file>
        ```
      </Card>
      
      <Card title="ls [paths...]">
        Browse containedInSection hierarchy as a tree
        
        ```bash
        ./spry.ts axiom ls
        ./spry.ts axiom ls ./runbook.md
        ```
      </Card>
      
      <Card title="inspect [paths...]">
        Inspect mdast nodes as a hierarchy
        
        ```bash
        ./spry.ts axiom inspect <path to md file>
        ```
      </Card>
      
      <Card title="projection [paths...]">
        Compute a projection and emit as JSON
        
        ```bash
        ./spry.ts axiom projection <path to md file>
        ```
      </Card>
      
      <Card title="shebang [paths...]">
        Convert markdown files into executables with shebang helpers
        
        ```bash
        ./spry.ts axiom shebang <path to md file>
        ```
      </Card>
    </Cards>

    #### 4. `ls` - List Tasks

    List all code cells (tasks) found in markdown documents in a tabular format.

    ```bash
    ./spry.ts ls [paths...] [options]
    ```

    **Purpose:** List code cells (tasks) in markdown documents.

    **Arguments:**
    - `[paths...]`: Optional paths to markdown files or URLs

    **Options:**
    - `-h, --help`: Show help information
    - `--no-color`: Display output without ANSI colors

    **Examples:**

    ```bash
    # List tasks from default files (Spryfile.md)
    ./spry.ts ls

    # List tasks from local file
    ./spry.ts ls ./Spryfile.md

    # List tasks from remote URL
    ./spry.ts ls https://raw.githubusercontent.com/programmablemd/spry/main/support/assurance/scf/Spryfile.md

    # List tasks from multiple sources
    ./spry.ts ls ./Spryfile.md ./tasks.md

    # List without colors
    ./spry.ts ls ./Spryfile.md --no-color
    ```

    **Output Columns:**

    - **NAME**: Task identifier
    - **ENGINE**: Execution engine (shebang or deno-task)
    - **DEPS**: Task dependencies (comma-separated)
    - **FLAGS**: Task flags indicating:
      - `E`: Has errors/issues (red)
      - `I`: Is interpolated (yellow)
      - `CF`/`CM`: Capture mode (File or Memory, blue)
      - `G`: Git ignored
      - `S`: Silent execution
    - **DESCR**: Task description
    - **ORIGIN**: Source file path
    - **GRAPH**: Graph membership (comma-separated)

    #### 5. `task` - Execute Specific Task

    Execute a single task and its dependencies.

    ```bash
    ./spry.ts task <taskId> [paths...] [options]
    ```

    **Purpose:** Execute a specific cell and dependencies.

    **Arguments:**
    - `<taskId>`: **(Required)** The identifier of the task to execute
    - `[paths...]`: Optional paths to markdown files or URLs

    **Options:**
    - `-h, --help`: Show help information
    - `--verbose <style>`: Emit verbose information messages (Values: `plain`, `rich`, `markdown`)
    - `--summarize`: Emit execution summary in JSON format after completion

    **Examples:**

    ```bash
    # Execute specific task from default files
    ./spry.ts task setup-database

    # Execute task from specific file
    ./spry.ts task setup-database ./Spryfile.md

    # Execute task with verbose output (plain text)
    ./spry.ts task deploy-app --verbose plain

    # Execute task with rich formatting
    ./spry.ts task deploy-app --verbose rich

    # Execute task with markdown output
    ./spry.ts task deploy-app --verbose markdown

    # Execute task and show JSON summary
    ./spry.ts task deploy-app ./Spryfile.md --summarize

    # Execute task with verbose and summarize
    ./spry.ts task deploy-app --verbose rich --summarize
    ```

    **Behavior:**
    - Executes the specified task and all its dependencies
    - Tasks are executed in dependency order
    - Shows error if task is not found
    - With `--verbose`, displays detailed execution information
    - With `--summarize`, outputs JSON summary of execution results

    #### 6. `run` - Execute All Tasks

    Execute all code cells in markdown documents as a directed acyclic graph (DAG).

    ```bash
    ./spry.ts run [paths...] [options]
    ```

    **Purpose:** Execute all code cells in markdown documents as a DAG.

    **Arguments:**
    - `[paths...]`: Optional paths to markdown files or URLs

    **Options:**
    - `-h, --help`: Show help information
    - `--verbose <style>`: Emit verbose information messages (Values: `plain`, `rich`, `markdown`)
    - `--graph <name>`: Run only tasks in specified graph(s). Can be used multiple times
    - `--summarize`: Emit execution summary in JSON format after completion
    - `--visualize <style>`: Visualize the execution DAG instead of running it
      - Values: `ascii-tree`, `ascii-workflow`, `ascii-flowchart`, `mermaid-js`

    **Examples:**

    ```bash
    # Run all tasks from default files
    ./spry.ts run

    # Run tasks from specific file
    ./spry.ts run ./Spryfile.md

    # Run tasks with rich verbose output
    ./spry.ts run ./Spryfile.md --verbose rich

    # Run only tasks in specific graph
    ./spry.ts run --graph deployment

    # Run tasks from multiple graphs
    ./spry.ts run --graph setup --graph deployment

    # Visualize the DAG as ASCII tree (without executing)
    ./spry.ts run --visualize ascii-tree

    # Visualize as Mermaid.js diagram
    ./spry.ts run --visualize mermaid-js

    # Run with summary output
    ./spry.ts run ./Spryfile.md --summarize
    ```

    **Behavior:**
    - Parses all markdown files and extracts code cells as tasks
    - Builds a dependency graph from task relationships
    - Executes tasks in topological order respecting dependencies
    - Can filter tasks by graph membership using `--graph`
    - Supports visualization mode to inspect the execution plan without running

    **Visualization Styles:**
    1. **ascii-tree**: Simple tree representation of task dependencies
    2. **ascii-workflow**: Workflow-style diagram showing task flow
    3. **ascii-flowchart**: Flowchart representation of the DAG
    4. **mermaid-js**: Generates Mermaid.js diagram code for the DAG

    ### Verbose Styles

    The `--verbose` option accepts three styles:

    1. **plain**: Simple text output without formatting
    2. **rich**: Colored and formatted output with visual enhancements
    3. **markdown**: Output formatted as markdown document

    ### Task Flags Explanation

    When using the `ls` command, tasks display flags indicating their properties:

    - **E** (Error): Task has validation issues or errors (bright red)
    - **I** (Interpolated): Task content includes variable interpolation (bright yellow)
    - **CF** (Capture File): Task captures output to a relative file path (blue)
    - **CM** (Capture Memory): Task captures output to memory (blue)
    - **G** (Git Ignored): Task output is configured to be git-ignored
    - **S** (Silent): Task runs silently without standard output

    ### Supported Code Languages

    The CLI recognizes code blocks with the following language identifiers:

    - `shell` / `bash`: Shell scripts (primary spawnable language)
    - `sql`: SQL queries and migrations
    - `python`: Python scripts
    - `typescript` / `javascript`: TypeScript/JavaScript code
    - Custom languages can be extended through the language registry

    ### Task Execution Engines

    Tasks can be executed using different engines:

    1. **shebang**: Uses the shebang line (`#!/bin/...`) to determine interpreter (green)
    2. **deno-task**: Executes as a Deno task (cyan)

    The engine is automatically detected based on the code content.

    ### File Sources

    All commands that accept file paths support:

    1. **Local file system paths**: `./Spryfile.md`, `/path/to/file.md`
    2. **Remote URLs**: `https://raw.githubusercontent.com/...`
    3. **Multiple sources**: Mix of local and remote files
    4. **Directories**: Can specify directories containing markdown files

    ### Common Patterns

    <Tabs items={['Extract and Execute', 'Development Pattern']}>
      <Tab value="Extract and Execute">
        ```bash
        # First, visualize what will run
        ./spry.ts run --visualize ascii-tree

        # Then execute
        ./spry.ts run --verbose rich

        # Or for specific graph
        ./spry.ts run --graph production --visualize ascii-tree
        ./spry.ts run --graph production --verbose rich
        ```
      </Tab>
      
      <Tab value="Development Pattern">
        ```bash
        # List tasks to find task IDs
        ./spry.ts ls ./Spryfile.md

        # Execute specific task during development
        ./spry.ts task setup-database ./Spryfile.md --verbose rich

        # Run full workflow when ready
        ./spry.ts run ./Spryfile.md --graph development
        ```
      </Tab>
    </Tabs>
  </Tab>

  <Tab value="CLI">
    ## Axiom CLI Quick Reference
    
    ### Use CLI

    After the Installation and Initialization, to use the text-ui cli, spry.ts content should be changed like:

    ```typescript
    #!/usr/bin/env -S deno run -A --node-modules-dir=auto
    // Use `deno run -A --watch` in the shebang if you're contributing / developing Spry itself.

    import { CLI } from "../../../lib/axiom/text-ui/cli.ts";

    new CLI().run();
    ```

    ### Root Command

    ```bash
    ./spry.ts [command] [options]
    # or
    ./cli.ts [command] [options]
    ```

    ### Commands

    #### 1. `help`

    Display help information about available commands.

    ```bash
    ./spry.ts help
    ```

    #### 2. `completions` - Generate Shell Completions

    Generate shell completions for bash, fish, or zsh.

    ```bash
    ./spry.ts completions [shell]
    ```

    **Supported Shells:** bash, fish, zsh

    **Options:**
    - `-h, --help`: Show help information
    - `-n, --name <command-name>`: The name of the main command

    <Cards>
      <Card title="web-ui [paths...]">
        Serve the markdown mdasts and Spry Ontology Graphs (SOGs)
        
        ```bash
        ./spry.ts web-ui
        ./spry.ts web-ui <path to md file>
        ```
      </Card>
      
      <Card title="ls [paths...]">
        Browse containedInSection hierarchy as a tree
        
        ```bash
        ./spry.ts ls
        ./spry.ts ls ./runbook.md
        ```
      </Card>
      
      <Card title="inspect [paths...]">
        Inspect mdast nodes as a hierarchy
        
        ```bash
        ./spry.ts inspect <path to md file>
        ```
      </Card>
      
      <Card title="projection [paths...]">
        Compute a projection and emit as JSON
        
        ```bash
        ./spry.ts projection <path to md file>
        ```
      </Card>
      
      <Card title="shebang [paths...]">
        Convert markdown files into executables
        
        ```bash
        ./spry.ts shebang <path to md file>
        ```
      </Card>
    </Cards>
  </Tab>
</Tabs>